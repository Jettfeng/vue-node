<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
  let checkLogin = function(){
    return new Promise(function(resolve,reject){
      // let flag = document.cookie.indexOf("userId") > -1 ? true :false
      let flag = true
      if(flag){
        resolve({
          status:0,
          result:true
        })
      }else{
        reject('error')//一般指报错
      }
    })
  }

  let getUserInfo = ()=>{
    return new Promise((resolve,reject)=>{
      let userInfo = {
        userId:'102'
      }
      resolve(userInfo)
    })
  }

  checkLogin().then((res)=>{
    if(res.status == 0){
      console.log('login success')
      return getUserInfo()
    }
  }).then((res1)=>{
    console.log(res1)
  })


  // 同时多个promise
  Promise.all([checkLogin(),getUserInfo]).then(([res1,res2])=>{
    console.log(res1.result)
    console.log(res2)
  })
</script>
</html>
